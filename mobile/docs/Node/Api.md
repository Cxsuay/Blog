# Node - `Api`

## `Node` æ•°æ®ç±»å‹

### `Buffer`

+ æµå¼æ•°æ® (éä¸€æ¬¡æ€§åŠ è½½å®Œæˆçš„æ•°æ®) ç”±äºäº§ç”Ÿå’Œä½¿ç”¨ä¸ä¸€å®šåŒé€Ÿï¼Œæ‰€ä»¥**éœ€è¦ç¼“å­˜åŒº**
+ **å­˜å‚¨éœ€è¦ä¸´æ—¶å ç”¨å¤§é‡å†…å­˜çš„æ•°æ®**ï¼Œå†…å­˜ä¸­å¼€è¾Ÿçš„ä¸€ç‰‡åŒºåŸŸï¼Œç”¨äºå­˜æ”¾äºŒè¿›åˆ¶æ•°æ®
+ æµçš„ç”Ÿäº§è€… äº æ¶ˆè´¹è€… ä¹‹é—´çš„é€Ÿåº¦é€šå¸¸æ˜¯ä¸ä¸€è‡´çš„ï¼Œå› æ­¤**éœ€è¦ `buffer` æ¥æš‚å­˜ä¸€äº›æ•°æ®**
+ **`buffer` å¤§å°é€šè¿‡ `highWaterMark` å‚æ•°æŒ‡å®š**ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ `16kb`

```js
Buffer.from(buffer/array/string) // ä½¿ç”¨å †å¤–å†…å­˜ æ–°å¢Buffer ğŸ“
Buffer.from(arrayBuffer) // æµ…æ‹·è´ arrayBufferï¼Œå…±äº«å†…å­˜
Buffer.alloc(size) // åˆ†é…ä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Buffer, é»˜è®¤å¡«0ï¼Œä½¿ç”¨ UTF-8ç¼–ç  ğŸ“
Buffer.allocUnsafe(size) // åˆ†é…ä¸€ä¸ªåˆå§‹åŒ–çš„Buffer éšæœºï¼Œé€Ÿåº¦å¾ˆå¿« âœ¨âœ¨âœ¨
```

**æµå¼æ•°æ® ä¼šè‡ªåŠ¨åˆ›å»º `Buffer`ï¼Œæ‰‹åŠ¨åˆ›å»º `Buffer`éœ€è°¨æ… ğŸ“ğŸ“ğŸ“**

+ **ğŸ·~ å‘ï¼š**
  + `alloc`ç»•å¼€å›æ”¶æœºåˆ¶ï¼Œæ€§èƒ½å’Œå†…å­˜ä½¿ç”¨æå‡ï¼Œ**ä½†ä¸å®‰å…¨ï¼Œå¯èƒ½ä¼šé€ æˆæ•°æ®æ³„éœ²**
  + **å¤§äº 4k**ï¼Œå°±ä¸åœ¨åŸå®šä¹‰çš„ å†…å­˜æ± ä¸­åˆ†é…ï¼Œå°±ä¼š **ä» å¤–éƒ¨ æŠ½å–ã€‚**

#### ä½¿ç”¨

+ **è½¬æ¢æ ¼å¼**
  + **å­—ç¬¦ä¸² - `Buffer.from(string)` / è§£ç  `buf.toString(string)`**
  + **`JSON - buf.JSON()`**
+ **å‰ªè£å’Œæ‹¼æ¥**
  + **å‰ªè£ - `Buffer.slice()` ä¸ `Array.slice()`ä¸åŒï¼Œè¿”å› `Buffer` å’Œ `åŸbuf`å…±äº«å†…å­˜**
  + **æ‹¼æ¥ -` buf.copy/buf.concat` è¿”å›æ–°çš„ `Buffer`**
+ **æ¯”è¾ƒå’Œéå†ç´¢å¼•**
  + **åˆ¤æ–­ç›¸ç­‰ - `buf.equals(buf2)` æ¯”è¾ƒçš„æ˜¯ äºŒè¿›åˆ¶çš„å€¼**
  + **ç´¢å¼• - ä½¿ç”¨ `buf[index]` å½¢å¼è¿›è¡Œç´¢å¼•ï¼Œ`for...of/indexOf/includes` ç­‰Array æ–¹æ³• ä¹Ÿå¯ä»¥ä½¿ç”¨**

### `Stream`

+ **`Stream` æ¨¡å—æä¾›çš„æ˜¯ æŠ½è±¡æ¥å£**ï¼Œ æœ‰å¾ˆå¤š æ¨¡å—å®ç°äº† è¿™ä¸ªæ¥å£
+ `Stream` å°±æ˜¯è§£å†³ ç”Ÿäº§è€… å’Œ æ¶ˆè´¹è€…é—®é¢˜çš„ä¸€ç§æ–¹å¼ï¼Œ **è§£å†³å¼‚æ­¥`I/O`é—®é¢˜**

**`Stream & Buffer` éƒ½æ˜¯ åˆ†å‰²æˆå°å—ï¼Œç„¶å ç»„åˆæˆä¸€ä¸ªä¸ªçš„å° `chunk`ï¼Œ è¿›è¡Œä¼ é€’**

### `event` / `EventEmitter`

**`EventEmitters` -> `Event(ä¼šæœ‰å¾ˆå¤šäº‹ä»¶ ä¹‹åè¿›å…¥å¾ªç¯) ` <-> `EventLoop` -> `Event Handlers`**

### `Error`

+ **é”™è¯¯ç§ç±»**

  + **æ ‡å‡†çš„ js é”™è¯¯  `SyntaxError / ReferenceError`**
  + **åº•å±‚æ“ä½œè§¦å‘çš„ ç³»ç»Ÿé”™è¯¯ æ¯”å¦‚ æ–‡ä»¶è¯»å†™**
  + **ç”¨æˆ·è‡ªå®šä¹‰é”™è¯¯**
  + **å¼‚å¸¸é€»è¾‘è§¦å‘çš„ `AssertionError` é€šå¸¸æ¥è‡ª `assert` æ¨¡å—**

+ **é”™è¯¯å†’æ³¡å’Œæ•è· (ä¼˜å…ˆå¤„ç†é”™è¯¯)**

  + **æ‰€æœ‰é€šè¿‡ `Node.js` æˆ–è€… `JavaScript` è¿è¡Œæ—¶ æŠ›å‡ºçš„å¼‚å¸¸éƒ½æ˜¯ `Errorå®ä¾‹`, å¯ä»¥è¿›è¡Œ `try-catch`**

  + **å¤§å¤šæ•° å¼‚æ­¥æ–¹æ³• éƒ½æ¥å—ä¸€ä¸ª `callbackå‡½æ•°`ï¼Œè¯¥å‡½æ•° ä¼šæ¥å—ä¸€ä¸ª `Errorå¯¹è±¡`ä¼ å…¥ä½œä¸º ç¬¬ä¸€ä¸ªå‚æ•°ã€‚**

**`NodeJs` å†…ç½®çš„é”™è¯¯ä¿¡æ¯ï¼Œé€šå¸¸éƒ½æ˜¯ è§æ–‡çŸ¥æ„ çš„ã€‚ä¾‹å¦‚ `ERR_ARG_NOT_ITERBLE`**

### `URL`

**å¼ƒç”¨ `urlObjects`, æ”¹ç”¨ `WHATWG`(ç»„ç»‡è§„èŒƒ) `URL`**

**ä½¿ç”¨ `URLSearchParams` æ“ä½œå‚æ•°**

```js
{
  'https://course.study.163.com/path/to/the/page?params1=v1&params2=v2'

  // url.parse nodeæä¾›çš„å·¥å…·åº“
  url.parse(req.url).pathname å°±æ˜¯ 'path/to/the/page'
  url.parse(req.url).query å°±æ˜¯ 'params1=v1&params2=v2'
  // Querystring å°±æ˜¯å¯¹ query æ ¼å¼åŒ–çš„ä¸€ä¸ªå·¥å…·
  Querystring.parse(url.parse(req.url).query)['params2'] å°±æ˜¯ 'v2'

  // URLSearchParams æ“ä½œå‚æ•° æ¥è§£æ query å¯¹è±¡
  Object.fromEntries(new URLSearchParams('foo=bar&bar=qux'))
  // { foo: "bar", bar: qux }
}
```

### `global`

**çœ‹ä¸Šå»åƒæ˜¯ å…¨å±€å˜é‡çš„å­˜åœ¨ï¼Œå®é™…ä¸Š ä»…å­˜åœ¨äº æ¨¡å—çš„ä½œç”¨åŸŸä¸­ ğŸ“ğŸ“ğŸ“**

**å¸¸è§çš„å…¨å±€ä½œç”¨åŸŸ**

> **`__dirnameã€__filenameã€exportsã€moduleã€require`**

**ä» `Js` ç»§æ‰¿è€Œæ¥çš„å…¨å±€å˜é‡**

> **`consoleã€timerå…¨å®¶æ¡¶(setTimeout å•¥çš„)ã€globalå®¹å™¨`**

**`Node` ç‰¹æœ‰çš„å…¨å±€å˜é‡**

> **`Bufferã€processã€URLã€WebAssembly`**

### `NodeJs`æä¾›çš„å‡ ä¸ªå·¥å…·åº“

**`url` `Querystring` ä¸Šé¢æåˆ°çš„**

+ `Nodejs`å·¥å…·åº“ - `util`
  + é£æ ¼è½¬æ¢
    + `promisify <-> callbackify`
    + `TextEncoder <-> textDecoder`
  + è°ƒè¯•å·¥å…·
    + `debuglog`
    + `inspect`
    + `format`
    + `getSystemErrorName`
  + ç±»å‹åˆ¤æ–­
    + `types.isDate(value)`

+ `Nodejs`å·¥å…·åº“ - `assert`

  **å†…ç½®æ–­è¨€åº“ï¼Œéœ€è¦é…åˆæµ‹è¯•æ¡†æ¶ä½¿ç”¨ï¼Œä¸»åŠ¨æŠ›å‡º `AssertionError` é”™è¯¯**

  + æ–­è¨€çœŸå‡
    + `asserts(value, msg), match(string, reg)`
  + æ–­è¨€ç­‰ä»·
    + `strictEqual / deepStrictEqual ä»¥åŠç›¸åæ“ä½œ`
    + `equal/deepEqual å¼ƒç”¨`
  + æ–­è¨€ æˆåŠŸå¤±è´¥   æ–­è¨€ `fail` ` throws` å•Šå•¥çš„
    + `fail/throws/doesNotThrow/ifError/rejects`

+ `Nodejs`å·¥å…·åº“ - `querystring`

  **å®˜æ–¹æä¾›çš„ è§£æå’Œæ ¼å¼åŒ– URL æŸ¥è¯¢å­—ç¬¦ä¸² çš„å®ç”¨å·¥å…·**

  + æŸ¥è¯¢å­—ç¬¦ä¸² è½¬ é”®å€¼å¯¹
    + `querystring.parse(str[,sep[,eq[,options]]])`
  + é”®å€¼å¯¹ è½¬ æŸ¥è¯¢å­—ç¬¦ä¸²
    + `querystring.stringify(obj)`

### `NodeJs` çš„æ–‡ä»¶æ“ä½œèƒ½åŠ›`ï¼ˆCli çš„æ“ä½œï¼‰`

#### `os`

**`os`æ¨¡å— æä¾›äº†ä¸æ“ä½œç³»ç»Ÿç›¸å…³çš„å®ç”¨æ–¹æ³•ä¸å±æ€§**

**é€šè¿‡å…¼å®¹çš„æ–¹å¼è°ƒç”¨ ä¸åŒå¹³å°çš„åº•å±‚å‘½ä»¤ï¼Œå½¢æˆç³»ç»Ÿå¿«ç…§**

`cpus platform type uptime userinfo`

+ **å®šä¹‰æ“ä½œç³»ç»Ÿçº§åˆ«çš„æšä¸¾å¸¸é‡**
  + `ä¿¡å·å¸¸é‡ SIG*`
  + `é”™è¯¯å¸¸é‡ E*`
  + `windowsç‰¹æœ‰ WSA*`
  + `ä¼˜å…ˆçº§ PRIORITY*`

#### `fs`

**`fs` æ¨¡å—æ¨¡æ‹Ÿ `Linux` ç¯å¢ƒï¼Œæä¾›äº†ç”¨äº ä¸ æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œäº¤äº’çš„ `API`**

+ **æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿæ“ä½œéƒ½å…·æœ‰ åŒæ­¥å’Œå¼‚æ­¥ çš„å½¢å¼ ğŸ“**

  > è¯»å–æ–‡ä»¶ æ˜¯ä¸€ä¸ªæ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼Œæ‰€ä»¥ ä¸€èˆ¬ä½¿ç”¨ å¼‚æ­¥æ¨¡å¼ è¯»å–ã€‚

+ **`URI` ä½œä¸ºç‰¹æ®Šçš„æ–‡ä»¶ ä¹Ÿå¯ä»¥è¢« `fsæ¨¡å—` ä½¿ç”¨**

+ **è¯»å–æ“ä½œ æ–‡ä»¶çš„æ—¶å€™ æˆ‘ä»¬ä¹Ÿå¯ä»¥æ“ä½œ `ç½‘ç»œèµ„æºURI`**

+ **æ“ä½œæ–‡ä»¶å¤¹**
  + **`mkdir/rmdir` ç­‰ç­‰**

+ **æ“ä½œæ–‡ä»¶**
  + **`chmod/open/read/write`**

```js
// TODO: 
https://course.study.163.com/480000005670249/lecture-480000036957963
```

